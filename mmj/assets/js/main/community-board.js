jsoneopack([16,58,79],{108:function(e,t,n){var o=n(4)(n(109),n(110),null,null,null);o.options.__file="/Users/harasho/Documents/git_projects/mmj/mixmag-front/public/src/assets/vue/common/CommunityDetailHead.vue",o.esModule&&Object.keys(o.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),o.options.functional&&console.error("[vue-loader] CommunityDetailHead.vue: functional components are not supported with templates, they should use render functions."),e.exports=o.exports},109:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(22),i=function(e){return e&&e.__esModule?e:{default:e}}(o),s=n(26);t.default={name:"community-detail-head",data:function(){return{}},props:{store:{}},created:function(){this.$store=this.store,this.setId(),this.fetchDetail()},computed:{state:function(){return this.$store.state.header}},methods:(0,i.default)({},(0,s.mapActions)(["fetchDetail","join","remove"]),(0,s.mapMutations)(["setId"]))}},110:function(e,t,n){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"section community_detail"},[n("div",{staticClass:"row"},[n("div",{staticClass:"columns shrink"},[null!==e.state.community.image?n("span",{staticClass:"bg_image",style:"background-image: url("+e.state.community.image+")"}):n("span",{staticClass:"bg_image",style:"background-image: url(/assets/img/community/default.png)"})]),e._v(" "),n("div",{staticClass:"columns"},[n("h2",{staticClass:"community_detail--title"},[e._v(e._s(e.state.community.name))]),e._v(" "),e.state.joined?n("button",{staticClass:"community_detail--button button_low expanded",attrs:{disabled:e.state.isLoading},on:{click:e.remove}},[e._v("コミュニティを退会")]):n("button",{staticClass:"community_detail--button button_high expanded",attrs:{disabled:e.state.isLoading},on:{click:e.join}},[e._v("コミュニティに参加")])])])])},staticRenderFns:[]},e.exports.render._withStripped=!0},20:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),s=o(i),a=n(1),r=o(a),u=n(2),l=o(u),c=function(){function e(){(0,r.default)(this,e)}return(0,l.default)(e,null,[{key:"SET_VENUE_SEARCH_JSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];arguments.length>2&&void 0!==arguments[2]&&arguments[2];e={param:e,isSearchByLocation:t},window.sessionStorage.searchReqJson=(0,s.default)(e)}},{key:"SET_ARTIST_SEARCH_JSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];arguments.length>2&&void 0!==arguments[2]&&arguments[2];e={param:e,isSearchByToday:t},window.sessionStorage.searchReqJson=(0,s.default)(e)}},{key:"SET_EVENT_SEARCH_JSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];arguments.length>2&&void 0!==arguments[2]&&arguments[2];e={param:e,isSearchByLocation:t},window.sessionStorage.searchReqJson=(0,s.default)(e)}},{key:"GET_SEARCH_HISTORY",value:function(e){var t=window.localStorage[e+"SearchHistory"];return t=void 0===t?[]:JSON.parse(t)}},{key:"ADD_SEARCH_HISTORY",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e.GET_SEARCH_HISTORY(t);o.unshift(n),o.length>10&&o.pop(),window.localStorage[t+"SearchHistory"]=(0,s.default)(o)}},{key:"SET_BIRTHDAY_GENDER",value:function(e,t){var n={birthday:e,gender:t};window.sessionStorage.setItem("self_my_b_e_g",(0,s.default)(n))}},{key:"SET_CIGARETTES_AND_ALCOHOLS",value:function(e,t,n,o){var i={smoker:e,tabacoTypes:t,drinker:n,alcoholTypes:o};window.sessionStorage.setItem("self_c_and_a",(0,s.default)(i))}},{key:"SET_GENRES",value:function(e){var t={genres:e};window.sessionStorage.setItem("self_g",(0,s.default)(t))}},{key:"SET_AREA_IDS",value:function(e){var t={areaIds:e};window.sessionStorage.setItem("self_a",(0,s.default)(t))}},{key:"GET_VENUE_SEARCH_JSON",get:function(){return JSON.parse(window.sessionStorage.searchReqJson)}},{key:"GET_ARTIST_SEARCH_JSON",get:function(){return JSON.parse(window.sessionStorage.searchReqJson)}},{key:"GET_EVENT_SEARCH_JSON",get:function(){return JSON.parse(window.sessionStorage.searchReqJson)}},{key:"GET_BIRTHDAY_EMAIL_GENDER",get:function(){return JSON.parse(window.sessionStorage.self_my_b_e_g)}},{key:"GET_CIGARETTES_AND_ALCOHOLS",get:function(){return JSON.parse(window.sessionStorage.self_c_and_a)}},{key:"GET_GENRENS",get:function(){return JSON.parse(window.sessionStorage.self_g)}},{key:"GET_AREA_IDS",get:function(){return JSON.parse(window.sessionStorage.self_a)}}]),e}();t.default=c},211:function(e,t,n){var o=n(4)(n(212),n(213),null,null,null);o.options.__file="/Users/harasho/Documents/git_projects/mmj/mixmag-front/public/src/assets/vue/common/CommunityBoard.vue",o.esModule&&Object.keys(o.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),o.options.functional&&console.error("[vue-loader] CommunityBoard.vue: functional components are not supported with templates, they should use render functions."),e.exports=o.exports},212:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(22),i=function(e){return e&&e.__esModule?e:{default:e}}(o),s=n(26),a=n(3);t.default={name:"community-board",data:function(){return{timeLineMessage:"",inputComment:""}},props:{store:{},community:{}},created:function(){this.$store=this.store,this.setCommunityId(),this.fetchTimeLines()},filters:{filterVueTime:a.filterVueTime},computed:(0,i.default)({state:function(){return this.$store.state.timeLine}},(0,s.mapGetters)(["isJoined"])),methods:(0,i.default)({submitTimeLine:function(){var e=this;this.postTimeLine(this.timeLineMessage).then(function(t){e.timeLineMessage=""})},submitComment:function(e,t){this.postComment({comment:t,idx:e})},canReadMoreComments:function(e){return e.initialCount>2&&!e.noMoreRead&&!this.state.isLoading},nickname:function(e){return this.state.members[e].nickname},memberImage:function(e){return"background-image: url("+this.state.members[e].image1+")"}},(0,s.mapMutations)(["setCommunityId"]),(0,s.mapActions)(["fetchTimeLines","fetchMoreReadComments","postTimeLine","postComment"])),mounted:function(){}}},213:function(e,t,n){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.isJoined?n("div",{staticClass:"board_block--form_holder"},[n("form",{staticClass:"board_block--form"},[n("div",{staticClass:"row align-bottom"},[n("div",{staticClass:"columns"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.timeLineMessage,expression:"timeLineMessage"}],staticClass:"board_block--input post_comment",attrs:{type:"text",name:"board_post",value:"",rows:"4",cols:"40"},domProps:{value:e.timeLineMessage},on:{input:function(t){t.target.composing||(e.timeLineMessage=t.target.value)}}})]),e._v(" "),n("div",{staticClass:"button_comment--holder columns shrink"},[n("button",{staticClass:"button_comment",attrs:{disabled:0===e.timeLineMessage.length,type:"button",name:"button"},on:{click:e.submitTimeLine}},[e._v("投稿する")])])])])]):e._e(),e._v(" "),e._l(e.state.list,function(t,o){return[n("article",{staticClass:"board_block--post"},[n("div",{staticClass:"row"},[n("div",{staticClass:"columns shrink"},[n("span",{staticClass:"board_block--photo_thread",style:e.memberImage(t.memberId)})]),e._v(" "),n("div",{staticClass:"columns"},[n("p",{staticClass:"board_block--post_name"},[e._v(e._s(e.nickname(t.memberId)))]),e._v(" "),n("p",{staticClass:"board_block--post_time"},[e._v(e._s(e._f("filterVueTime")(t.createdAt)))])]),e._v(" "),n("p",{staticClass:"board_block--post_text columns small-12"},[e._v(e._s(t.comment))])])]),e._v(" "),n("article",{staticClass:"board_block--comment"},[n("div",{staticClass:"row"},[n("div",{staticClass:"columns"},[n("span",{staticClass:"number"},[e._v("コメント"+e._s(t.count)+"件")])]),e._v(" "),e.isJoined?n("div",{staticClass:"columns shrink"},[n("button",{staticClass:"button_comment button_comment_post",attrs:{type:"button",name:"button"},on:{click:function(n){e.submitComment(o,t.inputComment)}}},[e._v("コメントする")])]):e._e()]),e._v(" "),n("form",[e.isJoined?n("div",{staticClass:"post_comment_form row align-bottom align-center"},[n("div",{staticClass:"columns"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.inputComment,expression:"timeLine.inputComment"}],staticClass:"board_block--input post_comment",attrs:{type:"text",name:"board_post",rows:"4",cols:"40"},domProps:{value:t.inputComment},on:{input:function(e){e.target.composing||(t.inputComment=e.target.value)}}})])]):e._e()]),e._v(" "),n("ul",{staticClass:"list--boad_comment"},e._l(t.comments,function(t,i){return n("li",{key:o+"-"+i},[n("div",{staticClass:"board_block--comment_list row align-right"},[n("div",{staticClass:"board_block--comment_inner columns small-12"},[n("div",{staticClass:"comment_box"},[n("div",{staticClass:"row comment_box--head"},[n("div",{staticClass:"columns"},[n("p",[e._v(e._s(e.nickname(t.memberId))),n("time",[e._v(e._s(e._f("filterVueTime")(t.createdAt)))])])])]),e._v(" "),n("div",{staticClass:"comment_box--text"},[n("p",[e._v(e._s(t.comment))])])]),e._v(" "),n("span",{staticClass:"image",style:e.memberImage(t.memberId)})])])])})),e._v(" "),n("div",{staticClass:"button--holder"},[n("button",{directives:[{name:"show",rawName:"v-show",value:e.canReadMoreComments(t),expression:"canReadMoreComments(timeLine)"}],staticClass:"button_more_comment",attrs:{type:"button",name:"button"},on:{click:function(t){e.fetchMoreReadComments(o)}}},[e._v("全て表示")])])])]})],2)},staticRenderFns:[]},e.exports.render._withStripped=!0},214:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),s=o(i),a=n(65),r=o(a),u=n(3);t.default={state:{community:{id:0,name:"",image:null,communityCategoryId:1},joined:!1,isLoading:!1,loadingKey:"setLoading"},mutations:{setCommunity:function(e,t){e.community=t.community,e.joined=t.joined},joined:function(e,t){e.joined=t,console.log("にゃん = "+e.joined)},setId:function(e){e.community.id=(0,u.getQueryParameter)().id,console.log("set id... "+e.community.id)},setLoading:function(e,t){e.isLoading=t}},getters:{getId:function(){return(0,u.getQueryParameter)().id}},actions:{fetchDetail:function(e){var t=e.commit,n=e.state;t(n.loadingKey,!0),r.default.GET_DETAIL(n.community.id).then(function(e){console.log((0,s.default)(e)),t("setCommunity",e),t(n.loadingKey,!1)}).catch(function(e){return t(n.loadingKey,!1)})},join:function(e){var t=e.commit,n=e.state;t(n.loadingKey,!0),r.default.POST_JOIN(n.community.id).then(function(e){t("joined",!0),t(n.loadingKey,!1)}).catch(function(e){return t(n.loadingKey,!1)})},remove:function(e){var t=e.commit,n=e.state;t(n.loadingKey,!0),r.default.DELETE_JOIN(n.community.id).then(function(e){t("joined",!1),t(n.loadingKey,!1)}).catch(function(e){return t(n.loadingKey,!1)})}}}},3:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(){var e=document.getElementById("offcanvas_open"),t=(document.getElementById("offcanvas_close"),document.body),n=document.getElementById("offcanvas");e.onclick=function(){n.classList.toggle("is-menu-open"),t.classList.toggle("is-menu-open")}}function s(){var e=document.getElementById("inner_body"),t="",n=document.getElementsByClassName("js_modal_overlay"),o=document.getElementsByClassName("js_modal_close"),i=document.getElementsByClassName("show_modal"),s=document.body;[].forEach.call(i,function(n){n.onclick=function(){t=document.getElementById(n.getAttribute("data-modal")),t.classList.toggle("active"),s.classList.toggle("is-open"),e.classList.toggle("blured")}}),[].forEach.call(n,function(n){n.onclick=function(){t.classList.toggle("active"),s.classList.toggle("is-open"),e.classList.toggle("blured")}}),[].forEach.call(o,function(n){n.onclick=function(){t.classList.toggle("active"),s.classList.toggle("is-open"),e.classList.toggle("blured")}}),window.onload=function(){var e=document.getElementsByClassName("js_modal_close_and_show");[].forEach.call(e,function(e){e.onclick=function(){t.classList.toggle("active"),t=document.getElementById(e.getAttribute("data-modal")),t.classList.toggle("active")}})}}function a(){var e=document.getElementsByClassName("area_level_1"),t=document.getElementsByClassName("area_level_2");document.getElementsByClassName("area_checked");[].forEach.call(e,function(e){e.onclick=function(){e.classList.toggle("active"),t=e.nextElementSibling,t.classList.toggle("is-open"),t.classList.contains("check-open")&&t.classList.remove("check-open")}})}function r(){var e=void 0,t=document.getElementsByClassName("search_form_age");[].forEach.call(t,function(t){for(e=18;e<100;e++){var n=document.createElement("option");n.value=e,n.innerHTML=e,t.appendChild(n)}})}function u(){return window.location.search.substring(1).split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var n=(0,I.default)(t,2),o=n[0],i=n[1];return k.default.extend(e,(0,T.default)({},o,decodeURI(i)))},{})}function l(e){return e.toMoment().format("YYYY/MM/DD ddd")}function c(e){var t=(0,O.default)(e),n=(0,O.default)(e).startOf("day"),o=(0,O.default)().startOf("day"),i="M/DD H:mm";return n.isSame(o)&&(i="H:mm"),t.format(i)}function m(e,t){return e.toMoment().format(t)}function d(){var e={enableHighAccuracy:!1,timeout:15e3,maximumAge:5e3};return new b.default(function(t,n){navigator.geolocation.getCurrentPosition(function(e){var n=e.coords.latitude,o=e.coords.longitude;t({lon:n,lat:o,params:{params:{lon:n,lat:o,offset_distance:0}}})},function(e){var t={0:"原因不明のエラーが発生しました",1:"位置情報の取得が許可されませんでした",2:"電波状況などで位置情報が取得できませんでした",3:"位置情報の取得に時間がかかり過ぎてタイムアウトしました"};alert(t[e.code]),n(e||"ERROR")},e)})}function f(e,t){var n=e.split(",")[1],o=window.atob(n),i=new ArrayBuffer(o.length),s=new Uint8Array(i),a=void 0,r=void 0;for(a=0,r=o.length;a<r;a++)s[a]=o.charCodeAt(a);return new Blob([s],{type:t})}function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e6,n=e.toDataURL("image/jpeg"),o=f(n);console.log(o.size);var i=o;if(t<=o.size){var s=t/o.size;n=e.toDataURL("image/jpeg",s),i=f(n),console.log(s),console.log(i.size)}return i}function g(e){return"http://maps.google.co.jp/maps?q="+e}function p(){var e=[],t=0,n="",o="";n=window.location.search.slice(1).split("&"),t=n.length;for(var i=0;i<t;i++)o=n[i].split("="),e[o[0]]=o[1];return e}function v(){return null!==navigator.userAgent.match(/\/iOS-app\/jp.mixmag$/)}function h(){return null!==navigator.userAgent.match(/\/android-app\/jp.mixmag$/)}function y(){return v()||h()}Object.defineProperty(t,"__esModule",{value:!0});var E=n(5),b=o(E),C=n(14),T=o(C),S=n(10),I=o(S);t.navigation=i,t.modal=s,t.accordion=a,t.searchNumberSelect=r,t.getURLQueryJSON=u,t.filterVueEventDate=l,t.filterVueTime=c,t.filterVueDateTime=m,t.getCurrentPosition=d,t.base64ToBlob=f,t.compressImage=_,t.makeGmapUrlByAddress=g,t.getQueryParameter=p,t.isiOSAPP=v,t.isAndroidAPP=h,t.isApp=y;var M=n(12),k=o(M),w=n(7),L=o(w),R=n(0),O=o(R);(0,L.default)()},520:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var i=n(15),s=o(i),a=n(3),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a),u=n(108),l=o(u),c=n(211),m=o(c),d=n(521),f=o(d);r.accordion(),r.modal(),r.searchNumberSelect(),function(){var e=document.getElementsByClassName("button_comment_post"),t=document.getElementsByClassName("post_comment_form");[].forEach.call(e,function(e){e.onclick=function(){t=e.nextElementSibling,t.classList.toggle("is_open")}})}();(function(){new s.default({TimeLineStore:f.default,el:"#community-board-vue",delimiters:["${","}"],data:{isLoading:!1,isLoadCompleted:!1},created:function(){this.$store=f.default,console.log(this.store)},components:{CommunityDetailHead:l.default,CommunityBoard:m.default},methods:{},computed:{communityId:function(){return this.$store.getters.getId}},mounted:function(){}})})()},521:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(15),s=o(i),a=n(26),r=o(a),u=n(214),l=o(u),c=n(525),m=o(c),d=n(530),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(d);s.default.use(r.default),t.default=new r.default.Store({getters:f,modules:{header:l.default,timeLine:m.default}})},525:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=e.list;t.list.some(function(e){var t=e.data[0];e.data.splice(0,1),t.comments=e.data,s(t,e.initialCount),n.push(t)}),h.default.set(e,"list",n)}function s(e,t){e.initialCount=t,e.count=t}Object.defineProperty(t,"__esModule",{value:!0});var a,r=n(14),u=o(r),l=n(5),c=o(l),m=n(9),d=o(m),f=n(66),_=o(f),g=n(16),p=o(g),v=n(15),h=o(v),y=n(529),E=o(y),b=n(3);t.default=(a={state:{communityId:0,list:[],members:[],isLoading:!1,noMoreRead:!1,loadingKey:"updateIsLoading"},getters:{timeLine:function(e){return function(t){return e.list[t]}},comments:function(e){return function(t){return e.list[t].comments}}},mutations:{setTimeLines:function(e,t){e.members=t.members,e.list=[],i(e,t)},pushTimeLines:function(e,t){e.members=(0,p.default)({},e.members,t.members),i(e,t)},unshiftTimeLine:function(e,t){t.comment.comments=[],s(t.comment,0),e.members=(0,p.default)({},e.members,t.member),e.list.unshift(t.comment)},pushComments:function(e,t){var n,o=t.res,i=t.idx;e.members=(0,p.default)({},e.members,o.members),(n=e.list[i].comments).push.apply(n,(0,_.default)(o.comments))},unshiftComment:function(e,t){var n=t.res,o=t.idx;e.list[o].count+=1,e.members=(0,p.default)({},e.members,n.member),e.list[o].comments.unshift(n.comment),e.list[o].inputComment=""},setNoMoreReadComments:function(e,t){e.list[t].noMoreRead=!0},setCommunityId:function(e){e.communityId=(0,b.getQueryParameter)().id,console.log("set id... "+e.communityId)},updateIsLoading:function(e,t){e.isLoading=t}}},(0,u.default)(a,"getters",{}),(0,u.default)(a,"actions",{fetchTimeLines:function(e){var t=e.commit,n=e.state;t(n.loadingKey,!0),E.default.GET_TIME_LINES(n.communityId).then(function(e){t(n.loadingKey,!1),t("setTimeLines",e)}).catch(function(e){return t("setLoading",!1)})},postTimeLine:function(e,t){var n=e.commit,o=e.state;n(o.loadingKey,!0);var i={comment:t};return E.default.POST_TIME_LINES(o.communityId,i).then(function(e){return console.log((0,d.default)(e)),n(o.loadingKey,!1),n("unshiftTimeLine",e),e}).catch(function(e){return n(o.loadingKey,!1),c.default.reject(e)})},postComment:function(e,t){var n=e.commit,o=e.state,i=t.comment,s=t.idx;n(o.loadingKey,!0);var a={comment:i},r=o.list[s].communityTimeLineId;E.default.POST_COMMENTS(r,o.communityId,a).then(function(e){return console.log((0,d.default)(e)),n(o.loadingKey,!1),n("unshiftComment",{res:e,idx:s}),e}).catch(function(e){return n(o.loadingKey,!1),c.default.reject(e)})},fetchMoreReadComments:function(e,t){var n=e.commit,o=e.state;n(o.loadingKey,!0);var i=o.list[t],s=i.comments.last().id;E.default.GET_COMMENTS(i.communityTimeLineId,s).then(function(e){console.log((0,d.default)(e)),n(o.loadingKey,!1),n("pushComments",{res:e,idx:t}),n("setNoMoreReadComments",t)}).catch(function(e){return n(o.loadingKey,!1)})}}),a)},529:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),s=o(i),a=n(2),r=o(a),u=n(6),l=o(u),c=function(){function e(){(0,s.default)(this,e)}return(0,r.default)(e,null,[{key:"GET_TIME_LINES",value:function(t,n){return(new l.default).ins.get(e.PREFIX+"/communities/"+t)}},{key:"GET_COMMENTS",value:function(t,n){return(new l.default).ins.get(e.PREFIX+"/"+t+"/comments",{params:{next_id:n}})}},{key:"POST_TIME_LINES",value:function(t,n){return(new l.default).ins.post(e.PREFIX+"/communities/"+t,n)}},{key:"POST_COMMENTS",value:function(t,n,o){return(new l.default).ins.post(e.PREFIX+"/"+t+"/communities/"+n+"/comments",o)}},{key:"PREFIX",get:function(){return"/api/community_time_lines"}}]),e}();t.default=c},530:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.isJoined=function(e){return e.header.joined}},6:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),s=o(i),a=n(9),r=o(a),u=n(16),l=o(u),c=n(1),m=o(c),d=n(2),f=o(d);n(18);var _=n(19),g=o(_),p=n(11),v=o(p),h=n(3),y=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(h),E=n(8),b=o(E),C=function(){function e(){var t=this,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15e3;(0,m.default)(this,e);var i={},a=location.pathname.startsWith("/friends/")||location.pathname.startsWith("/community/"),u="Bearer";a&&null===location.pathname.match(/registration/)&&!this.isCurrentPathEqualSignIn()&&(u+="Friend");var c=(0,v.default)("mag_token_front");c&&(i.Authorization=u+" "+c),i=(0,l.default)({},i,this.makeContentType()),this.showErrorAlert=n,this.ins=g.default.create({timeout:o,headers:i,onDownloadProgress:function(e){}}),this.ins.interceptors.response.use(function(e){return e.data},function(e){var n=0,o=void 0;return void 0!==e.response&&(n=e.response.status,o=e.response.data,console.log("error: "+n),console.log("data: "+(0,r.default)(o)),console.log("message: "+e.response.message)),401===n?(console.log("認証エラー"),window.confirm("Mixmag japanにログインしてすべての機能を体験しましょう！")&&(y.isApp()?b.default.AUTH_ERROR:T("/login/"))):void 0!==o&&o.errorCode>999?(console.log(o.message),alert(o.message)):403===n?a&&T("/friends/sign-in.html"):t.showErrorAlert&&(n>=500?(alert("サーバでエラーが発生しました"),console.log("サーバでエラーが発生しました")):(alert("通信に失敗しました"),console.log("通信に失敗しました"))),s.default.reject(e)})}return(0,f.default)(e,[{key:"makeContentType",value:function(){return{}}},{key:"isCurrentPathEqualSignIn",value:function(){return location.pathname.startsWith("/friends/sign-in.html")}}],[{key:"GET_TOKEN",get:function(){return(0,v.default)("mag_token_front")}}]),e}();t.default=C;var T=function(e){location.href=e}},65:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),s=o(i),a=n(22),r=o(a),u=n(161),l=o(u),c=n(1),m=o(c),d=n(2),f=o(d),_=n(6),g=o(_),p=n(20),v=(o(p),function(){function e(){(0,m.default)(this,e)}return(0,f.default)(e,null,[{key:"GET_LIST",value:function(){return(new g.default).ins.get(e.PREFIX)}},{key:"GET_LIST_BY_TYPE",value:function(t,n){return console.log(t),(new g.default).ins.get(e.PREFIX+"/types/"+t+"?offset="+n)}},{key:"GET_CATEGORIES",value:function(){return(new g.default).ins.get(""+e.CATEGORY_PREFIX)}},{key:"GET_CATEGORY_COMMUNITIES",value:function(t,n){return(new g.default).ins.get(e.PREFIX+"/categories/"+t+"?offset="+n)}},{key:"GET_SEARCH_COMMUNTY_NAME",value:function(t,n){return(new g.default).ins.get(e.PREFIX+"/search",{params:{name:t,offset:n}})}},{key:"GET_DETAIL",value:function(t){return(new g.default).ins.get(e.PREFIX+"/"+t)}},{key:"GET_SEARCH_MEMBERS",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=new g.default,s={since_date:o};return console.log(n),(0,l.default)(n).length>0&&(s=(0,r.default)({area_ids:n.areaIds,gender:n.gender,prefecture:n.birthplace,age_from:n.ageFrom,age_to:n.ageTo},s)),i.ins.get(e.PREFIX+"/"+t+"/members/search",{params:s})}},{key:"POST_JOIN",value:function(t){return(new g.default).ins.post(e.PREFIX+"/"+t+"/member/join")}},{key:"DELETE_JOIN",value:function(t){return(new g.default).ins.delete(e.PREFIX+"/"+t+"/member/join")}},{key:"GET_INITIAL_TOP",value:function(){return s.default.all([e.GET_LIST(),e.GET_CATEGORIES()])}},{key:"PREFIX",get:function(){return"/api/communities"}},{key:"CATEGORY_PREFIX",get:function(){return"/api/community_categories"}}]),e}());t.default=v},7:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(13),s=o(i),a=n(0),r=o(a),u=function(){String.prototype.format=function(e){var t=void 0;if("object"===(void 0===e?"undefined":(0,s.default)(e)))t=function(t,n){return e[n]};else{var n=arguments;t=function(e,t){return n[parseInt(t)]}}return this.replace(/\{(\w+)\}/g,t)},String.prototype.toMoment=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"YYYY-MM-DD HH:mm:ss";return(0,r.default)(this,e)},String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.lastIndexOf(e,t)===t}),String.prototype.endsWith||Object.defineProperty(String.prototype,"endsWith",{enumerable:!1,configurable:!1,writable:!1,value:function(e,t){return t=t||this.length,t-=e.length,this.lastIndexOf(e)===t}}),Date.prototype.reqFormat=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"YYYY-MM-DD HH:mm:ss";return(0,r.default)(this).format(e)},Array.prototype.isEmpty=function(){return 0===this.length},Array.prototype.last=function(){return this.isEmpty()?null:this[this.length-1]},Array.prototype.first=function(){return this.isEmpty()?null:this[0]}};t.default=u},8:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),s=o(i),a=n(2),r=o(a),u=function(){function e(){(0,s.default)(this,e)}return(0,r.default)(e,null,[{key:"PREFIX",get:function(){return"call-native://api/"}},{key:"AUTH_ERROR",get:function(){location.href=e.PREFIX+"authError"}},{key:"CLOSE_MODAL",get:function(){location.href=e.PREFIX+"closeModal"}},{key:"CLOSE_MODAL_IMMEDIATELY",get:function(){location.href=e.PREFIX+"closeModalImmediately"}},{key:"PATCH_DEVICE_TOKEN",get:function(){location.href=e.PREFIX+"patchDeviceToken"}}]),e}();t.default=u}},[520]);