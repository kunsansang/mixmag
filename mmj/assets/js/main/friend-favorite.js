jsoneopack([28,78],{116:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(66),o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=n(3);t.default={state:{communityId:0,list:[],nextSinceDate:null,next:!1,isMembersFetching:!1},getters:{member:function(e){return function(t){return e.list[t]}},members:function(e){return e.list},next:function(e){return e.next}},mutations:{updateMembers:function(e,t){e.list=t.list,e.nextSinceDate=t.nextSinceDate,e.next=t.next},addMembers:function(e,t){var n;(n=e.list).push.apply(n,(0,o.default)(t.list)),e.nextSinceDate=t.nextSinceDate,e.next=t.next},updateIsMembersFetching:function(e,t){e.isMembersFetching=t},setCommunityId:function(e){e.communityId=(0,i.getQueryParameter)().id}},actions:{}}},27:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=r(o),a=n(2),s=r(a),u=n(6),c=r(u),l=function(){function e(){(0,i.default)(this,e)}return(0,s.default)(e,null,[{key:"GET_FRIENDS",value:function(){return(new c.default).ins.get(e.FRIENDS_PREFIX+"members")}},{key:"GET_MYSELF",value:function(){return(new c.default).ins.get(e.FRIENDS_PREFIX+"member")}},{key:"GET_REQUEST_FRIENDS",value:function(){return(new c.default).ins.get(e.FRIENDS_PREFIX+"members/request")}},{key:"GET_SEARCH",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(new c.default).ins.get(e.FRIENDS_PREFIX+"search",{params:{area_ids:t.areaIds,gender:t.gender,prefecture:t.birthplace,age_from:t.ageFrom,age_to:t.ageTo,since_date:n}}).then(function(e){return e})}},{key:"GET_FAVORITE_FRIENDS",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(new c.default).ins.get(e.FRIENDS_PREFIX+"favorites",{since_date:t}).then(function(e){return e})}},{key:"GET_PROFILE",value:function(t){return(new c.default).ins.get(e.FRIENDS_PREFIX+"members/"+t).then(function(e){return e})}},{key:"POST_FAVORITE",value:function(t){return(new c.default).ins.post(e.FRIENDS_PREFIX+"favorites/members/"+t)}},{key:"DELETE_FAVORITE",value:function(t){return(new c.default).ins.delete(e.FRIENDS_PREFIX+"favorites/members/"+t)}},{key:"PATCH_START_EXPRESSION",value:function(t){return(new c.default).ins.patch(e.FRIENDS_PREFIX+"member/receive/start",{modeType:t})}},{key:"PATCH_END_EXPRESSION",value:function(){return(new c.default).ins.patch(e.FRIENDS_PREFIX+"member/receive/end")}},{key:"GET_EXPRESSION_STATUS",value:function(t){return(new c.default).ins.get(e.FRIENDS_PREFIX+"members/"+t+"/receive/check")}},{key:"FRIENDS_PREFIX",get:function(){return"/api/friends/"}}]),e}();t.default=l},3:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(){var e=document.getElementById("offcanvas_open"),t=(document.getElementById("offcanvas_close"),document.body),n=document.getElementById("offcanvas");e.onclick=function(){n.classList.toggle("is-menu-open"),t.classList.toggle("is-menu-open")}}function i(){var e=document.getElementById("inner_body"),t="",n=document.getElementsByClassName("js_modal_overlay"),r=document.getElementsByClassName("js_modal_close"),o=document.getElementsByClassName("show_modal"),i=document.body;[].forEach.call(o,function(n){n.onclick=function(){t=document.getElementById(n.getAttribute("data-modal")),t.classList.toggle("active"),i.classList.toggle("is-open"),e.classList.toggle("blured")}}),[].forEach.call(n,function(n){n.onclick=function(){t.classList.toggle("active"),i.classList.toggle("is-open"),e.classList.toggle("blured")}}),[].forEach.call(r,function(n){n.onclick=function(){t.classList.toggle("active"),i.classList.toggle("is-open"),e.classList.toggle("blured")}}),window.onload=function(){var e=document.getElementsByClassName("js_modal_close_and_show");[].forEach.call(e,function(e){e.onclick=function(){t.classList.toggle("active"),t=document.getElementById(e.getAttribute("data-modal")),t.classList.toggle("active")}})}}function a(){var e=document.getElementsByClassName("area_level_1"),t=document.getElementsByClassName("area_level_2");document.getElementsByClassName("area_checked");[].forEach.call(e,function(e){e.onclick=function(){e.classList.toggle("active"),t=e.nextElementSibling,t.classList.toggle("is-open"),t.classList.contains("check-open")&&t.classList.remove("check-open")}})}function s(){var e=void 0,t=document.getElementsByClassName("search_form_age");[].forEach.call(t,function(t){for(e=18;e<100;e++){var n=document.createElement("option");n.value=e,n.innerHTML=e,t.appendChild(n)}})}function u(){return window.location.search.substring(1).split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var n=(0,F.default)(t,2),r=n[0],o=n[1];return P.default.extend(e,(0,S.default)({},r,decodeURI(o)))},{})}function c(e){return e.toMoment().format("YYYY/MM/DD ddd")}function l(e){var t=(0,A.default)(e),n=(0,A.default)(e).startOf("day"),r=(0,A.default)().startOf("day"),o="M/DD H:mm";return n.isSame(r)&&(o="H:mm"),t.format(o)}function d(e,t){return e.toMoment().format(t)}function f(){var e={enableHighAccuracy:!1,timeout:15e3,maximumAge:5e3};return new b.default(function(t,n){navigator.geolocation.getCurrentPosition(function(e){var n=e.coords.latitude,r=e.coords.longitude;t({lon:n,lat:r,params:{params:{lon:n,lat:r,offset_distance:0}}})},function(e){var t={0:"原因不明のエラーが発生しました",1:"位置情報の取得が許可されませんでした",2:"電波状況などで位置情報が取得できませんでした",3:"位置情報の取得に時間がかかり過ぎてタイムアウトしました"};alert(t[e.code]),n(e||"ERROR")},e)})}function m(e,t){var n=e.split(",")[1],r=window.atob(n),o=new ArrayBuffer(r.length),i=new Uint8Array(o),a=void 0,s=void 0;for(a=0,s=r.length;a<s;a++)i[a]=r.charCodeAt(a);return new Blob([i],{type:t})}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e6,n=e.toDataURL("image/jpeg"),r=m(n);console.log(r.size);var o=r;if(t<=r.size){var i=t/r.size;n=e.toDataURL("image/jpeg",i),o=m(n),console.log(i),console.log(o.size)}return o}function v(e){return"http://maps.google.co.jp/maps?q="+e}function p(){var e=[],t=0,n="",r="";n=window.location.search.slice(1).split("&"),t=n.length;for(var o=0;o<t;o++)r=n[o].split("="),e[r[0]]=r[1];return e}function h(){return null!==navigator.userAgent.match(/\/iOS-app\/jp.mixmag$/)}function _(){return null!==navigator.userAgent.match(/\/android-app\/jp.mixmag$/)}function E(){return h()||_()}Object.defineProperty(t,"__esModule",{value:!0});var y=n(5),b=r(y),I=n(14),S=r(I),R=n(10),F=r(R);t.navigation=o,t.modal=i,t.accordion=a,t.searchNumberSelect=s,t.getURLQueryJSON=u,t.filterVueEventDate=c,t.filterVueTime=l,t.filterVueDateTime=d,t.getCurrentPosition=f,t.base64ToBlob=m,t.compressImage=g,t.makeGmapUrlByAddress=v,t.getQueryParameter=p,t.isiOSAPP=h,t.isAndroidAPP=_,t.isApp=E;var M=n(12),P=r(M),C=n(7),k=r(C),D=n(0),A=r(D);(0,k.default)()},560:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(22),i=r(o),a=n(15),s=r(a),u=n(26),c=n(77),l=r(c),d=n(78),f=r(d),m=n(27),g=(r(m),n(561)),v=r(g),p=void 0;window.onload=function(){p=h()};var h=function(){return new s.default({Store:v.default,el:"#friend-favorite-vue",delimiters:["${","}"],data:{isLoading:!1,isLoadCompleted:!1,showIreguiModal:!1,friends:[],nextSinceDate:""},created:function(){this.$store=v.default},components:{FriendCard:f.default,InfiniteLoading:l.default},methods:(0,i.default)({onInfinite:function(){var e=this;this.fetchFavoriteFriends().then(function(t){e.$refs.infiniteLoading.$emit("$InfiniteLoading:loaded"),!1===e.$store.getters.next&&e.$refs.infiniteLoading.$emit("$InfiniteLoading:complete")}).catch(function(t){e.$refs.infiniteLoading.$emit("$InfiniteLoading:loaded")})}},(0,u.mapActions)(["fetchFavoriteFriends"]))})}},561:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(15),i=r(o),a=n(26),s=r(a),u=n(116),c=r(u),l=n(562),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l);i.default.use(s.default),t.default=new s.default.Store({actions:d,modules:{member:c.default}})},562:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.fetchFavoriteFriends=void 0;var o=n(5),i=r(o),a=n(27),s=r(a);t.fetchFavoriteFriends=function(e){var t=e.commit,n=e.state,r="updateIsMembersFetching";return t(r,!0),s.default.GET_FAVORITE_FRIENDS(n.member.nextSinceDate).then(function(e){return t("addMembers",e),t(r,!1),e}).catch(function(e){return t(r,!1),i.default.reject(e)})}},6:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),i=r(o),a=n(9),s=r(a),u=n(16),c=r(u),l=n(1),d=r(l),f=n(2),m=r(f);n(18);var g=n(19),v=r(g),p=n(11),h=r(p),_=n(3),E=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(_),y=n(8),b=r(y),I=function(){function e(){var t=this,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15e3;(0,d.default)(this,e);var o={},a=location.pathname.startsWith("/friends/")||location.pathname.startsWith("/community/"),u="Bearer";a&&null===location.pathname.match(/registration/)&&!this.isCurrentPathEqualSignIn()&&(u+="Friend");var l=(0,h.default)("mag_token_front");l&&(o.Authorization=u+" "+l),o=(0,c.default)({},o,this.makeContentType()),this.showErrorAlert=n,this.ins=v.default.create({timeout:r,headers:o,onDownloadProgress:function(e){}}),this.ins.interceptors.response.use(function(e){return e.data},function(e){var n=0,r=void 0;return void 0!==e.response&&(n=e.response.status,r=e.response.data,console.log("error: "+n),console.log("data: "+(0,s.default)(r)),console.log("message: "+e.response.message)),401===n?(console.log("認証エラー"),window.confirm("Mixmag japanにログインしてすべての機能を体験しましょう！")&&(E.isApp()?b.default.AUTH_ERROR:S("/login/"))):void 0!==r&&r.errorCode>999?(console.log(r.message),alert(r.message)):403===n?a&&S("/friends/sign-in.html"):t.showErrorAlert&&(n>=500?(alert("サーバでエラーが発生しました"),console.log("サーバでエラーが発生しました")):(alert("通信に失敗しました"),console.log("通信に失敗しました"))),i.default.reject(e)})}return(0,m.default)(e,[{key:"makeContentType",value:function(){return{}}},{key:"isCurrentPathEqualSignIn",value:function(){return location.pathname.startsWith("/friends/sign-in.html")}}],[{key:"GET_TOKEN",get:function(){return(0,h.default)("mag_token_front")}}]),e}();t.default=I;var S=function(e){location.href=e}},7:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(13),i=r(o),a=n(0),s=r(a),u=function(){String.prototype.format=function(e){var t=void 0;if("object"===(void 0===e?"undefined":(0,i.default)(e)))t=function(t,n){return e[n]};else{var n=arguments;t=function(e,t){return n[parseInt(t)]}}return this.replace(/\{(\w+)\}/g,t)},String.prototype.toMoment=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"YYYY-MM-DD HH:mm:ss";return(0,s.default)(this,e)},String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.lastIndexOf(e,t)===t}),String.prototype.endsWith||Object.defineProperty(String.prototype,"endsWith",{enumerable:!1,configurable:!1,writable:!1,value:function(e,t){return t=t||this.length,t-=e.length,this.lastIndexOf(e)===t}}),Date.prototype.reqFormat=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"YYYY-MM-DD HH:mm:ss";return(0,s.default)(this).format(e)},Array.prototype.isEmpty=function(){return 0===this.length},Array.prototype.last=function(){return this.isEmpty()?null:this[this.length-1]},Array.prototype.first=function(){return this.isEmpty()?null:this[0]}};t.default=u},78:function(e,t,n){var r=n(4)(n(79),n(80),null,null,null);r.options.__file="/Users/harasho/Documents/git_projects/mmj/mixmag-front/public/src/assets/vue/common/FriendCard.vue",r.esModule&&Object.keys(r.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),r.options.functional&&console.error("[vue-loader] FriendCard.vue: functional components are not supported with templates, they should use render functions."),e.exports=r.exports},79:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(22),o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=n(26);t.default={name:"friend-card",data:function(){return{receives:{}}},props:{index:0,store:{}},created:function(){this.receives={CHEERS:{id:"1",value:"乾杯したい"},LIVE:{id:"2",value:"LIVEへ行きたい"},CLUB:{id:"3",value:"クラブへ行きたい"},EAT:{id:"4",value:"何か食べたい"},BAR:{id:"5",value:"バーへ飲みに行きたい"},DANCE:{id:"6",value:"踊りたい"},VIP:{id:"7",value:"VIPで乾杯！"}},this.$store=this.store},computed:{member:function(){return this.$store.getters.member(this.index)},computeImageCSS:function(){return{"background-image":"url("+this.member.image1+")"}}},methods:(0,o.default)({linkToProfile:function(e){return"/friends/profile.html?id="+e},commentColorCss:function(e){return"color0"+this.receives[e].id},clickedReceiveModeMember:function(e){var t=this;this.fetchExpressionStatus(e).then(function(e){e.receiveExpired?alert("「私がしたいこと」の期限が過ぎているためメッセージを送ることができません"):(sessionStorage.chatPath=t.friend.chatPath,location.href="chat.html")})}},(0,i.mapActions)(["fetchExpressionStatus"]))}},8:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=r(o),a=n(2),s=r(a),u=function(){function e(){(0,i.default)(this,e)}return(0,s.default)(e,null,[{key:"PREFIX",get:function(){return"call-native://api/"}},{key:"AUTH_ERROR",get:function(){location.href=e.PREFIX+"authError"}},{key:"CLOSE_MODAL",get:function(){location.href=e.PREFIX+"closeModal"}},{key:"CLOSE_MODAL_IMMEDIATELY",get:function(){location.href=e.PREFIX+"closeModalImmediately"}},{key:"PATCH_DEVICE_TOKEN",get:function(){location.href=e.PREFIX+"patchDeviceToken"}}]),e}();t.default=u},80:function(e,t,n){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",{staticClass:"friend_card"},[n("header",{staticClass:"friend_card--header"},[n("a",{attrs:{href:e.linkToProfile(e.member.id)}},[e.member.image1?n("span",{staticClass:"friend_card--photo",style:e.computeImageCSS}):n("span",{staticClass:"friend_card--photo",staticStyle:{"background-image":"url(../assets/img/common/user.png)"}}),e._v(" "),n("span",{staticClass:"friend_card--caption"},[e._v(e._s(e.member.latestLoginPeriod))]),e._v(" "),0!=e.member.favoriteId?n("span",{staticClass:"friend_card--favorite"},[n("svg",{staticClass:"icon icon-favorite"},[n("use",{attrs:{"xlink:href":"#icon-favorite"}})])]):e._e()])]),e._v(" "),n("h2",{staticClass:"friend_card--title"},[e._v("\n    "+e._s(e.member.age)+"歳 "+e._s(e.member.birthplace)+" "+e._s(e.member.nickname)+"\n  ")]),e._v(" "),n("div",{staticClass:"friend_card--comment--holder"},[!0===e.member.expiredReceiveEndAt?n("p",{staticClass:"friend_card--comment"},[e._v(e._s(e.member.message))]):n("a",{staticClass:"friend_card--comment",class:[{has_comment:e.member.receiveMode},e.commentColorCss(e.member.receiveMode)],on:{click:function(t){e.clickedReceiveModeMember(e.member.id)}}},[e._v(e._s(e.receives[e.member.receiveMode].value))])])])},staticRenderFns:[]},e.exports.render._withStripped=!0}},[560]);